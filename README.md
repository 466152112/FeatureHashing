FeatureHashing
==============

Implement feature hashing with R

## Demo

### Hashed Matrix


```r
library(FeatureHashing)
# Construct the model matrix. The transposed matrix is returned by default.
m <- hashed.model.matrix(~ ., CO2, 2^6, keep.hashing_mapping = TRUE)
# Print the matrix via dgCMatrix
as(m, "dgCMatrix")
```

```
## 64 x 84 sparse Matrix of class "dgCMatrix"
```

```
##    [[ suppressing 84 column names '1', '2', '3' ... ]]
```

```
##                                                                       
##  [1,]   1   1.0   1.0   1.0   1.0   1.0    1.0   1.0   1.0   1.0   1.0
##  [2,]   .   .     .     .     .     .      .     .     .     .     .  
##  [3,]   .   .     .     .     .     .      .     .     .     .     .  
##  [4,]   .   .     .     .     .     .      .     .     .     .     .  
##  [5,]   .   .     .     .     .     .      .     .     .     .     .  
##  [6,]   .   .     .     .     .     .      .     .     .     .     .  
##  [7,]   .   .     .     .     .     .      .     .     .     .     .  
##  [8,]   .   .     .     .     .     .      .     .     .     .     .  
##  [9,]  95 175.0 250.0 350.0 500.0 675.0 1000.0  95.0 175.0 250.0 350.0
## [10,]   .   .     .     .     .     .      .     .     .     .     .  
## [11,]   .   .     .     .     .     .      .     .     .     .     .  
## [12,]   .   .     .     .     .     .      .     .     .     .     .  
## [13,]   .   .     .     .     .     .      .     .     .     .     .  
## [14,]   .   .     .     .     .     .      .     .     .     .     .  
## [15,]   .   .     .     .     .     .      .     .     .     .     .  
## [16,]   .   .     .     .     .     .      .     .     .     .     .  
## [17,]   .   .     .     .     .     .      .     .     .     .     .  
## [18,]   .   .     .     .     .     .      .     .     .     .     .  
## [19,]   .   .     .     .     .     .      .     .     .     .     .  
## [20,]   .   .     .     .     .     .      .     .     .     .     .  
## [21,]   .   .     .     .     .     .      .     .     .     .     .  
## [22,]   .   .     .     .     .     .      .     .     .     .     .  
## [23,]   .   .     .     .     .     .      .     .     .     .     .  
## [24,]   .   .     .     .     .     .      .     .     .     .     .  
## [25,]   .   .     .     .     .     .      .     .     .     .     .  
## [26,]   1   1.0   1.0   1.0   1.0   1.0    1.0   .     .     .     .  
## [27,]   .   .     .     .     .     .      .     .     .     .     .  
## [28,] -16 -30.4 -34.8 -37.2 -35.3 -39.2  -39.7 -13.6 -27.3 -37.1 -41.8
## [29,]   .   .     .     .     .     .      .     .     .     .     .  
## [30,]   .   .     .     .     .     .      .     .     .     .     .  
## [31,]   .   .     .     .     .     .      .     .     .     .     .  
## [32,]   .   .     .     .     .     .      .     .     .     .     .  
## [33,]   .   .     .     .     .     .      .     .     .     .     .  
## [34,]   .   .     .     .     .     .      .     .     .     .     .  
## [35,]   .   .     .     .     .     .      .     .     .     .     .  
## [36,]   .   .     .     .     .     .      .     .     .     .     .  
## [37,]   .   .     .     .     .     .      .     .     .     .     .  
## [38,]   .   .     .     .     .     .      .     .     .     .     .  
## [39,]   0   0.0   0.0   0.0   0.0   0.0    0.0   0.0   0.0   0.0   0.0
## [40,]   .   .     .     .     .     .      .     .     .     .     .  
## [41,]   .   .     .     .     .     .      .     .     .     .     .  
## [42,]   .   .     .     .     .     .      .     .     .     .     .  
## [43,]   .   .     .     .     .     .      .     .     .     .     .  
## [44,]   .   .     .     .     .     .      .     .     .     .     .  
## [45,]   .   .     .     .     .     .      .     .     .     .     .  
## [46,]   .   .     .     .     .     .      .     .     .     .     .  
## [47,]   .   .     .     .     .     .      .     .     .     .     .  
## [48,]   .   .     .     .     .     .      .     .     .     .     .  
## [49,]   .   .     .     .     .     .      .     .     .     .     .  
## [50,]   .   .     .     .     .     .      .     .     .     .     .  
## [51,]   .   .     .     .     .     .      .     .     .     .     .  
## [52,]   .   .     .     .     .     .      .     .     .     .     .  
## [53,]   .   .     .     .     .     .      .     .     .     .     .  
## [54,]   .   .     .     .     .     .      .     .     .     .     .  
## [55,]   .   .     .     .     .     .      .     .     .     .     .  
## [56,]   .   .     .     .     .     .      .     .     .     .     .  
## [57,]   .   .     .     .     .     .      .    -1.0  -1.0  -1.0  -1.0
## [58,]   .   .     .     .     .     .      .     .     .     .     .  
## [59,]   .   .     .     .     .     .      .     .     .     .     .  
## [60,]   .   .     .     .     .     .      .     .     .     .     .  
## [61,]   .   .     .     .     .     .      .     .     .     .     .  
## [62,]   .   .     .     .     .     .      .     .     .     .     .  
## [63,]   .   .     .     .     .     .      .     .     .     .     .  
## [64,]   .   .     .     .     .     .      .     .     .     .     .  
##                                                                          
##  [1,]   1.0   1.0    1.0   1.0   1.0   1.0   1.0   1.0   1.0    1.0   1.0
##  [2,]   .     .      .     .     .     .     .     .     .      .     .  
##  [3,]   .     .      .     .     .     .     .     .     .      .     .  
##  [4,]   .     .      .     .     .     .     .     .     .      .     .  
##  [5,]   .     .      .     .     .     .     .     .     .      .     .  
##  [6,]   .     .      .     .     .     .     .     .     .      .     .  
##  [7,]   .     .      .     .     .     .     .     .     .      .     .  
##  [8,]   .     .      .     .     .     .     .     .     .      .     .  
##  [9,] 500.0 675.0 1000.0  95.0 175.0 250.0 350.0 500.0 675.0 1000.0  95.0
## [10,]   .     .      .     .     .     .     .     .     .      .     .  
## [11,]   .     .      .     .     .     .     .     .     .      .    -1.0
## [12,]   .     .      .     .     .     .     .     .     .      .     .  
## [13,]   .     .      .     .     .     .     .     .     .      .     .  
## [14,]   .     .      .     .     .     .     .     .     .      .     .  
## [15,]   .     .      .     .     .     .     .     .     .      .     .  
## [16,]   .     .      .     .     .     .     .     .     .      .     .  
## [17,]   .     .      .     .     .     .     .     .     .      .     .  
## [18,]   .     .      .     .     .     .     .     .     .      .     .  
## [19,]   .     .      .     .     .     .     .     .     .      .    -1.0
## [20,]   .     .      .     .     .     .     .     .     .      .     .  
## [21,]   .     .      .     .     .     .     .     .     .      .     .  
## [22,]   .     .      .     .     .     .     .     .     .      .     .  
## [23,]   .     .      .     .     .     .     .     .     .      .     .  
## [24,]   .     .      .     .     .     .     .     .     .      .     .  
## [25,]   .     .      .     .     .     .     .     .     .      .     .  
## [26,]   .     .      .     .     .     .     .     .     .      .     .  
## [27,]   .     .      .     1.0   1.0   1.0   1.0   1.0   1.0    1.0   .  
## [28,] -40.6 -41.4  -44.3 -16.2 -32.4 -40.3 -42.1 -42.9 -43.9  -45.5 -14.2
## [29,]   .     .      .     .     .     .     .     .     .      .     .  
## [30,]   .     .      .     .     .     .     .     .     .      .     .  
## [31,]   .     .      .     .     .     .     .     .     .      .     .  
## [32,]   .     .      .     .     .     .     .     .     .      .     .  
## [33,]   .     .      .     .     .     .     .     .     .      .     .  
## [34,]   .     .      .     .     .     .     .     .     .      .     .  
## [35,]   .     .      .     .     .     .     .     .     .      .     .  
## [36,]   .     .      .     .     .     .     .     .     .      .     .  
## [37,]   .     .      .     .     .     .     .     .     .      .     .  
## [38,]   .     .      .     .     .     .     .     .     .      .     .  
## [39,]   0.0   0.0    0.0   0.0   0.0   0.0   0.0   0.0   0.0    0.0  -1.0
## [40,]   .     .      .     .     .     .     .     .     .      .     .  
## [41,]   .     .      .     .     .     .     .     .     .      .     .  
## [42,]   .     .      .     .     .     .     .     .     .      .     .  
## [43,]   .     .      .     .     .     .     .     .     .      .     .  
## [44,]   .     .      .     .     .     .     .     .     .      .     .  
## [45,]   .     .      .     .     .     .     .     .     .      .     .  
## [46,]   .     .      .     .     .     .     .     .     .      .     .  
## [47,]   .     .      .     .     .     .     .     .     .      .     .  
## [48,]   .     .      .     .     .     .     .     .     .      .     .  
## [49,]   .     .      .     .     .     .     .     .     .      .     .  
## [50,]   .     .      .     .     .     .     .     .     .      .     .  
## [51,]   .     .      .     .     .     .     .     .     .      .     .  
## [52,]   .     .      .     .     .     .     .     .     .      .     .  
## [53,]   .     .      .     .     .     .     .     .     .      .     .  
## [54,]   .     .      .     .     .     .     .     .     .      .     .  
## [55,]   .     .      .     .     .     .     .     .     .      .     .  
## [56,]   .     .      .     .     .     .     .     .     .      .     .  
## [57,]  -1.0  -1.0   -1.0   .     .     .     .     .     .      .     .  
## [58,]   .     .      .     .     .     .     .     .     .      .     .  
## [59,]   .     .      .     .     .     .     .     .     .      .     .  
## [60,]   .     .      .     .     .     .     .     .     .      .     .  
## [61,]   .     .      .     .     .     .     .     .     .      .     .  
## [62,]   .     .      .     .     .     .     .     .     .      .     .  
## [63,]   .     .      .     .     .     .     .     .     .      .     .  
## [64,]   .     .      .     .     .     .     .     .     .      .     .  
##                                                                      
##  [1,]   1.0   1.0   1.0   1.0   1.0    1.0  1.0   1.0   1   1.0   1.0
##  [2,]   .     .     .     .     .      .    .     .     .   .     .  
##  [3,]   .     .     .     .     .      .    1.0   1.0   1   1.0   1.0
##  [4,]   .     .     .     .     .      .    .     .     .   .     .  
##  [5,]   .     .     .     .     .      .    .     .     .   .     .  
##  [6,]   .     .     .     .     .      .    .     .     .   .     .  
##  [7,]   .     .     .     .     .      .    .     .     .   .     .  
##  [8,]   .     .     .     .     .      .    .     .     .   .     .  
##  [9,] 175.0 250.0 350.0 500.0 675.0 1000.0 95.0 175.0 250 350.0 500.0
## [10,]   .     .     .     .     .      .    .     .     .   .     .  
## [11,]  -1.0  -1.0  -1.0  -1.0  -1.0   -1.0  .     .     .   .     .  
## [12,]   .     .     .     .     .      .    .     .     .   .     .  
## [13,]   .     .     .     .     .      .    .     .     .   .     .  
## [14,]   .     .     .     .     .      .    .     .     .   .     .  
## [15,]   .     .     .     .     .      .    .     .     .   .     .  
## [16,]   .     .     .     .     .      .    .     .     .   .     .  
## [17,]   .     .     .     .     .      .    .     .     .   .     .  
## [18,]   .     .     .     .     .      .    .     .     .   .     .  
## [19,]  -1.0  -1.0  -1.0  -1.0  -1.0   -1.0 -1.0  -1.0  -1  -1.0  -1.0
## [20,]   .     .     .     .     .      .    .     .     .   .     .  
## [21,]   .     .     .     .     .      .    .     .     .   .     .  
## [22,]   .     .     .     .     .      .    .     .     .   .     .  
## [23,]   .     .     .     .     .      .    .     .     .   .     .  
## [24,]   .     .     .     .     .      .    .     .     .   .     .  
## [25,]   .     .     .     .     .      .    .     .     .   .     .  
## [26,]   .     .     .     .     .      .    .     .     .   .     .  
## [27,]   .     .     .     .     .      .    .     .     .   .     .  
## [28,] -24.1 -30.3 -34.6 -32.5 -35.4  -38.7 -9.3 -27.3 -35 -38.8 -38.6
## [29,]   .     .     .     .     .      .    .     .     .   .     .  
## [30,]   .     .     .     .     .      .    .     .     .   .     .  
## [31,]   .     .     .     .     .      .    .     .     .   .     .  
## [32,]   .     .     .     .     .      .    .     .     .   .     .  
## [33,]   .     .     .     .     .      .    .     .     .   .     .  
## [34,]   .     .     .     .     .      .    .     .     .   .     .  
## [35,]   .     .     .     .     .      .    .     .     .   .     .  
## [36,]   .     .     .     .     .      .    .     .     .   .     .  
## [37,]   .     .     .     .     .      .    .     .     .   .     .  
## [38,]   .     .     .     .     .      .    .     .     .   .     .  
## [39,]  -1.0  -1.0  -1.0  -1.0  -1.0   -1.0 -1.0  -1.0  -1  -1.0  -1.0
## [40,]   .     .     .     .     .      .    .     .     .   .     .  
## [41,]   .     .     .     .     .      .    .     .     .   .     .  
## [42,]   .     .     .     .     .      .    .     .     .   .     .  
## [43,]   .     .     .     .     .      .    .     .     .   .     .  
## [44,]   .     .     .     .     .      .    .     .     .   .     .  
## [45,]   .     .     .     .     .      .    .     .     .   .     .  
## [46,]   .     .     .     .     .      .    .     .     .   .     .  
## [47,]   .     .     .     .     .      .    .     .     .   .     .  
## [48,]   .     .     .     .     .      .    .     .     .   .     .  
## [49,]   .     .     .     .     .      .    .     .     .   .     .  
## [50,]   .     .     .     .     .      .    .     .     .   .     .  
## [51,]   .     .     .     .     .      .    .     .     .   .     .  
## [52,]   .     .     .     .     .      .    .     .     .   .     .  
## [53,]   .     .     .     .     .      .    .     .     .   .     .  
## [54,]   .     .     .     .     .      .    .     .     .   .     .  
## [55,]   .     .     .     .     .      .    .     .     .   .     .  
## [56,]   .     .     .     .     .      .    .     .     .   .     .  
## [57,]   .     .     .     .     .      .    .     .     .   .     .  
## [58,]   .     .     .     .     .      .    .     .     .   .     .  
## [59,]   .     .     .     .     .      .    .     .     .   .     .  
## [60,]   .     .     .     .     .      .    .     .     .   .     .  
## [61,]   .     .     .     .     .      .    .     .     .   .     .  
## [62,]   .     .     .     .     .      .    .     .     .   .     .  
## [63,]   .     .     .     .     .      .    .     .     .   .     .  
## [64,]   .     .     .     .     .      .    .     .     .   .     .  
##                                                                      
##  [1,]   1.0    1.0   1.0   1   1.0   1   1.0   1.0    1.0   1.0   1.0
##  [2,]   .      .    -1.0  -1  -1.0  -1  -1.0  -1.0   -1.0   .     .  
##  [3,]   1.0    1.0   .     .   .     .   .     .      .     .     .  
##  [4,]   .      .     .     .   .     .   .     .      .     .     .  
##  [5,]   .      .     .     .   .     .   .     .      .     .     .  
##  [6,]   .      .     .     .   .     .   .     .      .     .     .  
##  [7,]   .      .     .     .   .     .   .     .      .     .     .  
##  [8,]   .      .     .     .   .     .   .     .      .     .     .  
##  [9,] 675.0 1000.0  95.0 175 250.0 350 500.0 675.0 1000.0  95.0 175.0
## [10,]   .      .     .     .   .     .   .     .      .     .     .  
## [11,]   .      .     .     .   .     .   .     .      .     .     .  
## [12,]   .      .     .     .   .     .   .     .      .     .     .  
## [13,]   .      .     .     .   .     .   .     .      .     .     .  
## [14,]   .      .     .     .   .     .   .     .      .     .     .  
## [15,]   .      .     .     .   .     .   .     .      .     .     .  
## [16,]   .      .     .     .   .     .   .     .      .     .     .  
## [17,]   .      .     .     .   .     .   .     .      .     .     .  
## [18,]   .      .     .     .   .     .   .     .      .     .     .  
## [19,]  -1.0   -1.0  -1.0  -1  -1.0  -1  -1.0  -1.0   -1.0   .     .  
## [20,]   .      .     .     .   .     .   .     .      .     .     .  
## [21,]   .      .     .     .   .     .   .     .      .     .     .  
## [22,]   .      .     .     .   .     .   .     .      .     .     .  
## [23,]   .      .     .     .   .     .   .     .      .     .     .  
## [24,]   .      .     .     .   .     .   .     .      .     .     .  
## [25,]   .      .     .     .   .     .   .     .      .     .     .  
## [26,]   .      .     .     .   .     .   .     .      .     .     .  
## [27,]   .      .     .     .   .     .   .     .      .     .     .  
## [28,] -37.5  -42.4 -15.1 -21 -38.1 -34 -38.9 -39.6  -41.4 -10.6 -19.2
## [29,]   .      .     .     .   .     .   .     .      .     .     .  
## [30,]   .      .     .     .   .     .   .     .      .     .     .  
## [31,]   .      .     .     .   .     .   .     .      .     .     .  
## [32,]   .      .     .     .   .     .   .     .      .     .     .  
## [33,]   .      .     .     .   .     .   .     .      .     .     .  
## [34,]   .      .     .     .   .     .   .     .      .     .     .  
## [35,]   .      .     .     .   .     .   .     .      .     .     .  
## [36,]   .      .     .     .   .     .   .     .      .     .     .  
## [37,]   .      .     .     .   .     .   .     .      .     .     .  
## [38,]   .      .     .     .   .     .   .     .      .     .     .  
## [39,]  -1.0   -1.0  -1.0  -1  -1.0  -1  -1.0  -1.0   -1.0   1.0   1.0
## [40,]   .      .     .     .   .     .   .     .      .     .     .  
## [41,]   .      .     .     .   .     .   .     .      .     .     .  
## [42,]   .      .     .     .   .     .   .     .      .     .     .  
## [43,]   .      .     .     .   .     .   .     .      .     .     .  
## [44,]   .      .     .     .   .     .   .     .      .     .     .  
## [45,]   .      .     .     .   .     .   .     .      .     .     .  
## [46,]   .      .     .     .   .     .   .     .      .     .     .  
## [47,]   .      .     .     .   .     .   .     .      .     .     .  
## [48,]   .      .     .     .   .     .   .     .      .     .     .  
## [49,]   .      .     .     .   .     .   .     .      .     .     .  
## [50,]   .      .     .     .   .     .   .     .      .     .     .  
## [51,]   .      .     .     .   .     .   .     .      .     .     .  
## [52,]   .      .     .     .   .     .   .     .      .     .     .  
## [53,]   .      .     .     .   .     .   .     .      .     .     .  
## [54,]   .      .     .     .   .     .   .     .      .     .     .  
## [55,]   .      .     .     .   .     .   .     .      .    -1.0  -1.0
## [56,]   .      .     .     .   .     .   .     .      .     .     .  
## [57,]   .      .     .     .   .     .   .     .      .    -1.0  -1.0
## [58,]   .      .     .     .   .     .   .     .      .     .     .  
## [59,]   .      .     .     .   .     .   .     .      .     .     .  
## [60,]   .      .     .     .   .     .   .     .      .     .     .  
## [61,]   .      .     .     .   .     .   .     .      .     .     .  
## [62,]   .      .     .     .   .     .   .     .      .     .     .  
## [63,]   .      .     .     .   .     .   .     .      .     .     .  
## [64,]   .      .     .     .   .     .   .     .      .     .     .  
##                                                                          
##  [1,]   1.0   1   1.0   1.0    1.0   1   1   1.0   1.0   1.0   1.0    1.0
##  [2,]   .     .   .     .      .     .   .   .     .     .     .      .  
##  [3,]   .     .   .     .      .     .   .   .     .     .     .      .  
##  [4,]   .     .   .     .      .     .   .   .     .     .     .      .  
##  [5,]   .     .   .     .      .     .   .   .     .     .     .      .  
##  [6,]   .     .   .     .      .     .   .   .     .     .     .      .  
##  [7,]   .     .   .     .      .     .   .   .     .     .     .      .  
##  [8,]   .     .   .     .      .     .   .   .     .     .     .      .  
##  [9,] 250.0 350 500.0 675.0 1000.0  95 175 250.0 350.0 500.0 675.0 1000.0
## [10,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [11,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [12,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [13,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [14,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [15,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [16,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [17,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [18,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [19,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [20,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [21,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [22,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [23,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [24,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [25,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [26,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [27,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [28,] -26.2 -30 -30.9 -32.4  -35.5 -12 -22 -30.6 -31.8 -32.4 -31.1  -31.5
## [29,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [30,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [31,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [32,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [33,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [34,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [35,]   .     .   .     .      .     1   1   1.0   1.0   1.0   1.0    1.0
## [36,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [37,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [38,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [39,]   1.0   1   1.0   1.0    1.0   1   1   1.0   1.0   1.0   1.0    1.0
## [40,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [41,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [42,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [43,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [44,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [45,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [46,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [47,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [48,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [49,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [50,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [51,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [52,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [53,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [54,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [55,]  -1.0  -1  -1.0  -1.0   -1.0   .   .   .     .     .     .      .  
## [56,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [57,]  -1.0  -1  -1.0  -1.0   -1.0  -1  -1  -1.0  -1.0  -1.0  -1.0   -1.0
## [58,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [59,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [60,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [61,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [62,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [63,]   .     .   .     .      .     .   .   .     .     .     .      .  
## [64,]   .     .   .     .      .     .   .   .     .     .     .      .  
##                                                                         
##  [1,]   1.0   1.0   1.0   1.0   1.0   1.0    1.0   1.0   1.0   1.0   1.0
##  [2,]   .     .     .     .     .     .      .     .     .     .     .  
##  [3,]   .     .     .     .     .     .      .     .     .     .     .  
##  [4,]   .     .     .     .     .     .      .     .     .     .     .  
##  [5,]   .     .     .     .     .     .      .     .     .     .     .  
##  [6,]   .     .     .     .     .     .      .     .     .     .     .  
##  [7,]   .     .     .     .     .     .      .     1.0   1.0   1.0   1.0
##  [8,]   .     .     .     .     .     .      .     .     .     .     .  
##  [9,]  95.0 175.0 250.0 350.0 500.0 675.0 1000.0  95.0 175.0 250.0 350.0
## [10,]   .     .     .     .     .     .      .     .     .     .     .  
## [11,]   .     .     .     .     .     .      .     .     .     .     .  
## [12,]   .     .     .     .     .     .      .     .     .     .     .  
## [13,]   .     .     .     .     .     .      .     .     .     .     .  
## [14,]   .     .     .     .     .     .      .     .     .     .     .  
## [15,]   .     .     .     .     .     .      .     .     .     .     .  
## [16,]   .     .     .     .     .     .      .     .     .     .     .  
## [17,]   .     .     .     .     .     .      .     .     .     .     .  
## [18,]   .     .     .     .     .     .      .     .     .     .     .  
## [19,]   .     .     .     .     .     .      .    -1.0  -1.0  -1.0  -1.0
## [20,]   .     .     .     .     .     .      .     .     .     .     .  
## [21,]   .     .     .     .     .     .      .     .     .     .     .  
## [22,]   .     .     .     .     .     .      .     .     .     .     .  
## [23,]   .     .     .     .     .     .      .     .     .     .     .  
## [24,]   .     .     .     .     .     .      .     .     .     .     .  
## [25,]   .     .     .     .     .     .      .     .     .     .     .  
## [26,]   .     .     .     .     .     .      .     .     .     .     .  
## [27,]   .     .     .     .     .     .      .     .     .     .     .  
## [28,] -11.3 -19.4 -25.8 -27.9 -28.5 -28.1  -27.8 -10.5 -14.9 -18.1 -18.9
## [29,]   .     .     .     .     .     .      .     .     .     .     .  
## [30,]   .     .     .     .     .     .      .     .     .     .     .  
## [31,]   .     .     .     .     .     .      .     .     .     .     .  
## [32,]   .     .     .     .     .     .      .     .     .     .     .  
## [33,]   .     .     .     .     .     .      .     .     .     .     .  
## [34,]   .     .     .     .     .     .      .     .     .     .     .  
## [35,]   .     .     .     .     .     .      .     .     .     .     .  
## [36,]   .     .     .     .     .     .      .     .     .     .     .  
## [37,]   .     .     .     .     .     .      .     .     .     .     .  
## [38,]   .     .     .     .     .     .      .     .     .     .     .  
## [39,]   1.0   1.0   1.0   1.0   1.0   1.0    1.0   .     .     .     .  
## [40,]   .     .     .     .     .     .      .     .     .     .     .  
## [41,]   .     .     .     .     .     .      .     .     .     .     .  
## [42,]   .     .     .     .     .     .      .     .     .     .     .  
## [43,]   .     .     .     .     .     .      .     .     .     .     .  
## [44,]   .     .     .     .     .     .      .     .     .     .     .  
## [45,]   .     .     .     .     .     .      .     .     .     .     .  
## [46,]   .     .     .     .     .     .      .     .     .     .     .  
## [47,]   .     .     .     .     .     .      .     .     .     .     .  
## [48,]   .     .     .     .     .     .      .     .     .     .     .  
## [49,]   .     .     .     .     .     .      .     .     .     .     .  
## [50,]   .     .     .     .     .     .      .     .     .     .     .  
## [51,]   .     .     .     .     .     .      .     .     .     .     .  
## [52,]   .     .     .     .     .     .      .     .     .     .     .  
## [53,]   .     .     .     .     .     .      .     .     .     .     .  
## [54,]   .     .     .     .     .     .      .     .     .     .     .  
## [55,]   1.0   1.0   1.0   1.0   1.0   1.0    1.0   .     .     .     .  
## [56,]   .     .     .     .     .     .      .     .     .     .     .  
## [57,]  -1.0  -1.0  -1.0  -1.0  -1.0  -1.0   -1.0  -1.0  -1.0  -1.0  -1.0
## [58,]   .     .     .     .     .     .      .     .     .     .     .  
## [59,]   .     .     .     .     .     .      .     .     .     .     .  
## [60,]   .     .     .     .     .     .      .     .     .     .     .  
## [61,]   .     .     .     .     .     .      .     .     .     .     .  
## [62,]   .     .     .     .     .     .      .     .     .     .     .  
## [63,]   .     .     .     .     .     .      .     .     .     .     .  
## [64,]   .     .     .     .     .     .      .     .     .     .     .  
##                                                                           
##  [1,]   1.0   1.0    1.0  1.0   1.0   1.0   1   1.0   1.0    1.0   1.0   1
##  [2,]   .     .      .    .     .     .     .   .     .      .     .     .
##  [3,]   .     .      .    .     .     .     .   .     .      .     .     .
##  [4,]   .     .      .    .     .     .     .   .     .      .     .     .
##  [5,]   .     .      .    .     .     .     .   .     .      .     .     .
##  [6,]   .     .      .    .     .     .     .   .     .      .     .     .
##  [7,]   1.0   1.0    1.0  .     .     .     .   .     .      .     .     .
##  [8,]   .     .      .    .     .     .     .   .     .      .     .     .
##  [9,] 500.0 675.0 1000.0 95.0 175.0 250.0 350 500.0 675.0 1000.0  95.0 175
## [10,]   .     .      .    .     .     .     .   .     .      .     .     .
## [11,]   .     .      .    .     .     .     .   .     .      .     .     .
## [12,]   .     .      .    .     .     .     .   .     .      .     .     .
## [13,]   .     .      .    .     .     .     .   .     .      .     .     .
## [14,]   .     .      .    .     .     .     .   .     .      .     .     .
## [15,]   .     .      .    .     .     .     .   .     .      .     .     .
## [16,]   .     .      .    .     .     .     .   .     .      .     .     .
## [17,]   .     .      .    .     .     .     .   .     .      .     .     .
## [18,]   .     .      .    .     .     .     .   .     .      .     .     .
## [19,]  -1.0  -1.0   -1.0 -1.0  -1.0  -1.0  -1  -1.0  -1.0   -1.0  -1.0  -1
## [20,]   .     .      .    .     .     .     .   .     .      .     .     .
## [21,]   .     .      .    .     .     .     .   .     .      .     .     .
## [22,]   .     .      .    .     .     .     .   .     .      .     .     .
## [23,]   .     .      .    1.0   1.0   1.0   1   1.0   1.0    1.0   .     .
## [24,]   .     .      .    .     .     .     .   .     .      .     .     .
## [25,]   .     .      .    .     .     .     .   .     .      .     .     .
## [26,]   .     .      .    .     .     .     .   .     .      .     .     .
## [27,]   .     .      .    .     .     .     .   .     .      .     1.0   1
## [28,] -19.5 -22.2  -21.9 -7.7 -11.4 -12.3 -13 -12.5 -13.7  -14.4 -10.6 -18
## [29,]   .     .      .    .     .     .     .   .     .      .     .     .
## [30,]   .     .      .    .     .     .     .   .     .      .     .     .
## [31,]   .     .      .    .     .     .     .   .     .      .     .     .
## [32,]   .     .      .    .     .     .     .   .     .      .     .     .
## [33,]   .     .      .    .     .     .     .   .     .      .     .     .
## [34,]   .     .      .    .     .     .     .   .     .      .     .     .
## [35,]   .     .      .    .     .     .     .   .     .      .     .     .
## [36,]   .     .      .    .     .     .     .   .     .      .     .     .
## [37,]   .     .      .    .     .     .     .   .     .      .     .     .
## [38,]   .     .      .    .     .     .     .   .     .      .     .     .
## [39,]   .     .      .    .     .     .     .   .     .      .     .     .
## [40,]   .     .      .    .     .     .     .   .     .      .     .     .
## [41,]   .     .      .    .     .     .     .   .     .      .     .     .
## [42,]   .     .      .    .     .     .     .   .     .      .     .     .
## [43,]   .     .      .    .     .     .     .   .     .      .     .     .
## [44,]   .     .      .    .     .     .     .   .     .      .     .     .
## [45,]   .     .      .    .     .     .     .   .     .      .     .     .
## [46,]   .     .      .    .     .     .     .   .     .      .     .     .
## [47,]   .     .      .    .     .     .     .   .     .      .     .     .
## [48,]   .     .      .    .     .     .     .   .     .      .     .     .
## [49,]   .     .      .    .     .     .     .   .     .      .     .     .
## [50,]   .     .      .    .     .     .     .   .     .      .     .     .
## [51,]   .     .      .    .     .     .     .   .     .      .     .     .
## [52,]   .     .      .    .     .     .     .   .     .      .     .     .
## [53,]   .     .      .    .     .     .     .   .     .      .     .     .
## [54,]   .     .      .    .     .     .     .   .     .      .     .     .
## [55,]   .     .      .    .     .     .     .   .     .      .     .     .
## [56,]   .     .      .    .     .     .     .   .     .      .     .     .
## [57,]  -1.0  -1.0   -1.0 -1.0  -1.0  -1.0  -1  -1.0  -1.0   -1.0  -1.0  -1
## [58,]   .     .      .    .     .     .     .   .     .      .     .     .
## [59,]   .     .      .    .     .     .     .   .     .      .     .     .
## [60,]   .     .      .    .     .     .     .   .     .      .     .     .
## [61,]   .     .      .    .     .     .     .   .     .      .     .     .
## [62,]   .     .      .    .     .     .     .   .     .      .     .     .
## [63,]   .     .      .    .     .     .     .   .     .      .     .     .
## [64,]   .     .      .    .     .     .     .   .     .      .     .     .
##                                     
##  [1,]   1.0   1.0   1.0   1.0    1.0
##  [2,]   .     .     .     .      .  
##  [3,]   .     .     .     .      .  
##  [4,]   .     .     .     .      .  
##  [5,]   .     .     .     .      .  
##  [6,]   .     .     .     .      .  
##  [7,]   .     .     .     .      .  
##  [8,]   .     .     .     .      .  
##  [9,] 250.0 350.0 500.0 675.0 1000.0
## [10,]   .     .     .     .      .  
## [11,]   .     .     .     .      .  
## [12,]   .     .     .     .      .  
## [13,]   .     .     .     .      .  
## [14,]   .     .     .     .      .  
## [15,]   .     .     .     .      .  
## [16,]   .     .     .     .      .  
## [17,]   .     .     .     .      .  
## [18,]   .     .     .     .      .  
## [19,]  -1.0  -1.0  -1.0  -1.0   -1.0
## [20,]   .     .     .     .      .  
## [21,]   .     .     .     .      .  
## [22,]   .     .     .     .      .  
## [23,]   .     .     .     .      .  
## [24,]   .     .     .     .      .  
## [25,]   .     .     .     .      .  
## [26,]   .     .     .     .      .  
## [27,]   1.0   1.0   1.0   1.0    1.0
## [28,] -17.9 -17.9 -17.9 -18.9  -19.9
## [29,]   .     .     .     .      .  
## [30,]   .     .     .     .      .  
## [31,]   .     .     .     .      .  
## [32,]   .     .     .     .      .  
## [33,]   .     .     .     .      .  
## [34,]   .     .     .     .      .  
## [35,]   .     .     .     .      .  
## [36,]   .     .     .     .      .  
## [37,]   .     .     .     .      .  
## [38,]   .     .     .     .      .  
## [39,]   .     .     .     .      .  
## [40,]   .     .     .     .      .  
## [41,]   .     .     .     .      .  
## [42,]   .     .     .     .      .  
## [43,]   .     .     .     .      .  
## [44,]   .     .     .     .      .  
## [45,]   .     .     .     .      .  
## [46,]   .     .     .     .      .  
## [47,]   .     .     .     .      .  
## [48,]   .     .     .     .      .  
## [49,]   .     .     .     .      .  
## [50,]   .     .     .     .      .  
## [51,]   .     .     .     .      .  
## [52,]   .     .     .     .      .  
## [53,]   .     .     .     .      .  
## [54,]   .     .     .     .      .  
## [55,]   .     .     .     .      .  
## [56,]   .     .     .     .      .  
## [57,]  -1.0  -1.0  -1.0  -1.0   -1.0
## [58,]   .     .     .     .      .  
## [59,]   .     .     .     .      .  
## [60,]   .     .     .     .      .  
## [61,]   .     .     .     .      .  
## [62,]   .     .     .     .      .  
## [63,]   .     .     .     .      .  
## [64,]   .     .     .     .      .
```

```r
# Check the result of hashing
mapping <- unlist(as.list(attr(m, "mapping")))
# Check the rate of collision
# mean(duplicated(mapping %% 2^6))
# The result is CSCMatrix which supports simple subsetting and matrix-vector
# multiplication
# rnorm(2^6) %*% m

# Detail of the hashing
## The main effect is hashed via `hash_h`
all(hash_h(names(mapping)) %% 2^6 == mapping %% 2^6)
```

```
## [1] TRUE
```

```r
## The sign is corrected by `hash_xi`
hash_xi(names(mapping))
```

```
##  [1]  1 -1  1 -1 -1 -1 -1  1  1 -1  1 -1  1  1  1  1  1 -1
```

```r
## The interaction term is implemented as follow:
m2 <- hashed.model.matrix(~ .^2, CO2, 2^6, keep.hashing_mapping = TRUE)
mapping2 <- unlist(as.list(attr(m2, "mapping")))
mapping2[2] # PlantQn2:uptake
```

```
## PlantQn2:uptake 
##        7.55e+08
```

```r
h1 <- mapping2["PlantQn2"]
h2 <- mapping2["uptake"]
library(pack)
hash_h(rawToChar(c(numToRaw(h1, 4), numToRaw(h2, 4)))) # should be mapping2[2]
```

```
## [1] 755024387
```

```r
# The tag-like feature
data(test.tag)
df <- data.frame(a = test.tag, b = rnorm(length(test.tag)))
m <- hashed.model.matrix(~ tag(a, split = ",", type = "existence"):b, df, 2^6,
 keep.hashing_mapping = TRUE)
# The column `a` is splitted by "," and have an interaction with "b":
mapping <- unlist(as.list(attr(m, "mapping")))
names(mapping)
```

```
##  [1] "ach"  "a16"  "a17"  "a19"  "a1"   "a3"   "atn"  "a4"   "ahc"  "a6"  
## [11] "atp"  "a8"   "a20"  "a9"   "a21"  "a23"  "a24"  "a25"  "atw"  "a26" 
## [21] "a27"  "aty"  "ant"  "a29"  "akh"  "a30"  "a10"  "a11"  "atc"  "a"   
## [31] "a12"  "ail"  "antw" "a15"
```
